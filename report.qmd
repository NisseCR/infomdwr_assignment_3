---
title: "Supervised learning competition"
author: 
  - Nisse Hermsen
  - Isabelle de Wolf
  - Sara Sakhi
  - Celis Tittse
  - Agnieszka Kubica
date: last-modified
format:
  html:
    toc: true
    self-contained: true
    code-fold: true
    df-print: kable
---

```{r}
#| label: R packages
#| echo: false
#| warning: false
#| message: false

# Data manipulation
library(tidyverse)
# Data visualisation
library(ggplot2)
# Cross-validation methods
library(caret)
# Cross association
library(GGally)

library(randomForest)
```

```{r}
#| label: data loading
#| echo: false

data_train <- readRDS("data/train.rds") %>% as_tibble()
data_test <- readRDS("data/test.rds") %>% as_tibble()
```

```{r}
#| label: setup
#| echo: false

# Set set for reproducibility
set.seed(123)
```

# Data description

Describe the data and use a visualization to support your story. (approx. one or two paragraphs)

TODO:
- var table from csv
- hists for each var (cat vs cont)
- correlation w/ score (what vars are corr, predict outcome in feature selection)

```{r}
#| label: eda

summary(data_train)

```

```{r}
#| label: eda visualization

# your R code to generate the plot here

ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point() +
  theme_minimal()
```

# Model description

Briefly describe which models you compare to perform prediction. (approx. two or three paragraphs)

# Data transformation and pre-processing

Describe additional pre-processing steps you have used, if any (e.g., dealing with categorical data, scaling). If you do not do any pre-processing, you can leave this section out.

# Model creation

```{r}
#| label: train control

# Set up repeated k-fold cross-validation
train_control <- trainControl(method = "cv", number = 10)
```

```{r}
#| label: model 1 (feature selection)

model_1 <- train(
  score ~ .,
  data = data_train,
  method = "lmStepAIC",
  trace = FALSE, 
  direction = "backward",
  trControl = train_control,
)
```


```{r}
#| label: knn (eda features)

model_2 <- train(
  score ~ .,  # TODO remove highly correlated features based on EDA
  data = data_train,
  method = "knn",
  tuneLength = 10, 
  trControl = train_control
)

model_2
```

```{r}
#| label: create random-forest

model_3 <- train(
  score ~ .,
  data = data_train,
  method = "rf",
  trControl = train_control
)

model_3
```


# Model comparison

Describe how you compare the methods and why. (approx. two or three paragraphs)

# Chosen model

Show which method is best and why. (approx. one paragraph) You are welcome to use tables and plots!

```{r}
#| label: table example
data.frame(
  model       = c("Cool model 1", "Cool model 2"),
  performance = c(1.2, 1.8),
  other       = c(0.5, 0.3),
  notes       = c("Some note", "another note")
)
```

# Team member contributions

Write down what each team member contributed to the project.

- Author One: a, b, c
- Author Two: b, c, d
- Author Three: a, b, d
